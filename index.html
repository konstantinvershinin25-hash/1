<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–≤–µ—Å—Ç –¥–ª—è –ª—é–±–∏–º–æ–π</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
        color: #fff;
        overflow-x: hidden;
        background: linear-gradient(270deg, #ff99aa, #ffccdd, #ff99aa);
        background-size: 600% 600%;
        animation: gradientBG 15s ease infinite;
        position: relative;
        height: 100vh;
    }
    @keyframes gradientBG {
        0% {background-position: 0% 50%;}
        50% {background-position: 100% 50%;}
        100% {background-position: 0% 50%;}
    }
    h1 {
        font-size: 28px;
        margin: 0;
        padding: 20px;
        animation: glow 2s ease-in-out infinite alternate;
    }
    @keyframes glow {
        from { text-shadow: 0 0 5px #fff, 0 0 10px #ff6688; }
        to { text-shadow: 0 0 15px #fff, 0 0 30px #ff4466; }
    }
    .question {
        font-size: 20px;
        margin: 20px 0;
        padding: 0 15px;
        background: rgba(255,255,255,0.2);
        border-radius: 10px;
        display: inline-block;
    }
    .answers button, .answers label {
        display: block;
        margin: 10px auto;
        padding: 10px 20px;
        font-size: 16px;
    }
    .answers button {
        border: none;
        border-radius: 8px;
        background-color: #ff6688;
        color: white;
        cursor: pointer;
        transition: 0.3s;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .answers button:hover {
        background-color: #ff4466;
        transform: scale(1.05);
    }
    .lives {
        margin: 15px 0;
        font-size: 18px;
        background: rgba(255,255,255,0.2);
        padding: 5px 15px;
        border-radius: 20px;
        display: inline-block;
    }
    .image-container img {
        max-width: 90%;
        margin-top: 20px;
        border-radius: 10px;
        box-shadow: 0 0 15px rgba(0,0,0,0.3);
        opacity: 0;
        animation: fadeIn 1s forwards;
    }
    @keyframes fadeIn {
        to {opacity: 1;}
    }
    .hidden { display: none; }
    #result {
        font-size: 24px;
        margin-top: 30px;
    }
    /* –°–µ—Ä–¥–µ—á–∫–∏ */
    .heart {
        position: fixed;
        top: -10px;
        color: #ffcccc;
        font-size: 20px;
        animation: fall 6s linear infinite;
        opacity: 0.8;
        user-select: none;
        pointer-events: none;
    }
    @keyframes fall {
        0% { transform: translateY(0) rotate(0deg); }
        100% { transform: translateY(110vh) rotate(360deg); }
    }
    /* –§–µ–π–µ—Ä–≤–µ—Ä–∫ –∏ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ */
    #fireworksCanvas {
        position: fixed;
        top: 0; left: 0;
        width: 100vw;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
        display: none;
    }
    #congrats {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 48px;
        color: #ff3366;
        text-shadow: 0 0 10px #fff, 0 0 30px #ff6699;
        animation: pulse 2s infinite alternate;
        z-index: 10000;
        display: none;
        user-select: none;
    }
    @keyframes pulse {
        from {
            opacity: 0.8;
            transform: translate(-50%, -50%) scale(1);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.1);
        }
    }
</style>
</head>
<body>

<h1>üéâ –ö–≤–µ—Å—Ç –∫–æ –î–Ω—é –†–æ–∂–¥–µ–Ω–∏—è üéâ</h1>
<div class="lives">–ñ–∏–∑–Ω–∏: <span id="livesCount">5</span> ‚ù§Ô∏è</div>

<div id="game">
    <div class="question" id="question"></div>
    <div class="answers" id="answers"></div>
</div>

<div class="image-container hidden" id="imageContainer">
    <img id="rewardImage" src="" alt="–ù–∞–≥—Ä–∞–¥–∞">
    <br><button onclick="nextQuestion()">–î–∞–ª—å—à–µ ‚û°</button>
</div>

<div id="result" class="hidden"></div>

<canvas id="fireworksCanvas"></canvas>
<div id="congrats">–° –î–Ω—ë–º –†–æ–∂–¥–µ–Ω–∏—è, –°–æ–ª–Ω—ã—à–∫–æ! üíñ</div>

<script>
// –í–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã
let lives = 5;
let currentQuestion = 0;

const questions = [
    { text: "–í –∫–∞–∫–æ–π –Ω–∞—Å–µ–ª–µ–Ω–Ω—ã–π –ø—É–Ω–∫—Ç –º—ã –≤–º–µ—Å—Ç–µ –ø–æ–µ—Ö–∞–ª–∏ –≤–ø–µ—Ä–≤—ã–µ:", answers: ["–ö–æ–ø–µ–π—Å–∫", "–ú–∏–∞—Å—Å–∫–æ–µ", "–ö—É–ª—É–µ–≤–æ"], correct: [1], image: "images/1.jpg", multi: false },
    { text: "–ö–∞–∫–æ–π —Ç–≤–æ–π –ª—é–±–∏–º—ã–π –ø–∏—Ç–æ–º–µ—Ü:", answers: ["–ï—à–∞", "–û–ª–µ—Å—è (–∫–æ—à–∫–∞)", "–¢–æ–Ω–∏"], correct: [0], image: "images/2.jpg", multi: false },
    { text: "–¢–≤–æ–π –ª—É—á—à–∏–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è:", answers: ["–°–µ–π—á–∞—Å", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥", "–°–∞–º—ã–π –ø–µ—Ä–≤—ã–π –ø—Ä–æ–≤–µ–¥–µ–Ω—ã–π –≤–º–µ—Å—Ç–µ"], correct: [0], image: "images/3.jpg", multi: false },
    { text: "–õ—é–±–∏–º—ã–π —Ç–æ—Ä—Ç:", answers: ["–ö—Ä–∞—Å–Ω—ã–π –±–∞—Ä—Ö–∞—Ç", "–¢–æ—Ä—Ç –¥–Ω—è", "–ß–∏–∑–∫–µ–π–∫"], correct: [1], image: "images/4.jpg", multi: false },
    { text: "–õ—é–±–∏–º—ã–π —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫:", answers: ["–ú–∞–º–∞", "–ë–∞–±—É—à–∫–∞ –õ—é–±–∞", "–°–æ–Ω—è"], correct: [1], image: "images/5.jpg", multi: false },
    { text: "–ù–∞ —á—Ç–æ —Ç—ã –ø–æ—Ç—Ä–∞—Ç–∏—à—å –º–∏–ª–ª–∏–æ–Ω?", answers: ["–ù–∞ —Å–µ–±—è –ª—é–±–∏–º—É—é", "–ë—É–¥—É —É—Å–µ—Ä–¥–Ω–æ –≤–∫–ª–∞–¥—ã–≤–∞—Ç—å", "–ù–∞ –ï—à—É"], correct: [0], image: "images/6.jpg", multi: false },
    { text: "–ß—Ç–æ —Ç—ã –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ª—é–±–∏—à—å –ø–æ–ª—É—á–∞—Ç—å –æ—Ç —Å–≤–æ–µ–≥–æ –º—É–∂–∞:", answers: ["–¶–≤–µ—Ç—ã", "–ü–æ–¥–∞—Ä–æ—á–∫–∏", "–î–µ–Ω—å–≥–∏"], correct: [0,1,2], image: "images/7.jpg", multi: true },
    { text: "–ß—Ç–æ —Ç—ã –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –¥–µ–ª–∞–µ—à—å —É—Ç—Ä–æ–º?", answers: ["–ü—Ä–æ–≤–µ—Ä—è–µ—à—å —Ç–µ–ª–µ—Ñ–æ–Ω", "–£–º—ã–≤–∞–µ—à—å—Å—è", "–°–ª—É—à–∞–µ—à—å –º—É–∑—ã–∫—É"], correct: [0], image: "images/8.jpg", multi: false },
    { text: "–ß—Ç–æ –±—ã —è —Ç–µ–±–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–¥–∞—Ä–∏–ª –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è?", answers: ["–¢–µ—Ö–Ω–∏–∫—É –¥–ª—è –¥–æ–º–∞", "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ —á—Ç–æ-—Ç–æ", "–¢–æ, —á—Ç–æ —Ç—ã –≤—ã–±—Ä–∞–ª–∞"], correct: [0], image: "images/9.jpg", multi: false },
    { text: "–í –∫–∞–∫–æ–º –≥–æ–¥—É –±—ã–ª –ø–µ—Ä–≤—ã–π —Ç–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—ã–π –≤–º–µ—Å—Ç–µ?", answers: ["2016", "2017", "2018"], correct: [1], image: "images/10.jpg", multi: false }
];

// –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
function showQuestion() {
    const q = questions[currentQuestion];
    document.getElementById("question").textContent = q.text;
    const answersDiv = document.getElementById("answers");
    answersDiv.innerHTML = "";

    if (q.multi) {
        q.answers.forEach((ans, index) => {
            const label = document.createElement("label");
            label.style.display = "block";
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.value = index;
            label.appendChild(checkbox);
            label.appendChild(document.createTextNode(" " + ans));
            answersDiv.appendChild(label);
        });
        const submitBtn = document.createElement("button");
        submitBtn.textContent = "–í—ã–±—Ä–∞—Ç—å";
        submitBtn.onclick = checkMultiAnswer;
        answersDiv.appendChild(submitBtn);
    } else {
        q.answers.forEach((ans, index) => {
            const btn = document.createElement("button");
            btn.textContent = ans;
            btn.onclick = () => checkAnswer(index);
            answersDiv.appendChild(btn);
        });
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–∏–Ω–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
function checkAnswer(selected) {
    if (questions[currentQuestion].correct.includes(selected)) {
        showImage();
    } else {
        loseLife();
    }
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
function checkMultiAnswer() {
    const checkboxes = document.querySelectorAll("#answers input[type=checkbox]");
    let selectedIndexes = [];
    checkboxes.forEach(cb => { if (cb.checked) selectedIndexes.push(parseInt(cb.value)); });

    const correct = questions[currentQuestion].correct;
    if (arraysEqual(selectedIndexes.sort(), correct.sort())) {
        showImage();
    } else {
        loseLife();
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –º–∞—Å—Å–∏–≤–æ–≤
function arraysEqual(a, b) {
    return a.length === b.length && a.every((v, i) => v === b[i]);
}

// –ü–æ—Ç–µ—Ä—è –∂–∏–∑–Ω–∏
function loseLife() {
    lives--;
    document.getElementById("livesCount").textContent = lives;
    if (lives <= 0) {
        endGame(false);
    } else {
        alert("–ù–µ–≤–µ—Ä–Ω–æ! –û—Å—Ç–∞–ª–æ—Å—å –∂–∏–∑–Ω–µ–π: " + lives);
    }
}

// –ü–æ–∫–∞–∑ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ—Å–ª–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
function showImage() {
    document.getElementById("game").classList.add("hidden");
    document.getElementById("imageContainer").classList.remove("hidden");
    document.getElementById("rewardImage").src = questions[currentQuestion].image;
}

// –°–ª–µ–¥—É—é—â–∏–π –≤–æ–ø—Ä–æ—Å
function nextQuestion() {
    document.getElementById("imageContainer").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    currentQuestion++;
    if (currentQuestion >= questions.length) {
        endGame(true);
    } else {
        showQuestion();
    }
}

// –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã
function endGame(win) {
    document.getElementById("game").classList.add("hidden");
    document.getElementById("imageContainer").classList.add("hidden");
    const res = document.getElementById("result");
    res.classList.remove("hidden");
    if (win) {
        res.innerHTML = "<h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é, —Ç—ã –ø—Ä–æ—à–ª–∞ –∫–≤–µ—Å—Ç! üéâ</h2>";
        startFireworks();
        showCongrats();
    } else {
        res.innerHTML = "<h2>üíî –ñ–∏–∑–Ω–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!</h2>";
    }
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∞–Ω–∏–º–∞—Ü–∏—è —Å–µ—Ä–¥–µ—á–µ–∫
function createHeart() {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.style.left = Math.random() * 100 + "vw";
    heart.style.animationDuration = (4 + Math.random() * 3) + "s";
    heart.textContent = "‚ù§Ô∏è";
    document.body.appendChild(heart);
    setTimeout(() => { heart.remove(); }, 7000);
}
setInterval(createHeart, 500);

// –§–µ–π–µ—Ä–≤–µ—Ä–∫

const canvas = document.getElementById('fireworksCanvas');
const ctx = canvas.getContext('2d');
let cw, ch;
let fireworks = [];
let particles = [];
let animationFrameId;

function resizeCanvas() {
    cw = window.innerWidth;
    ch = window.innerHeight;
    canvas.width = cw;
    canvas.height = ch;
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);

class Firework {
    constructor(sx, sy, tx, ty) {
        this.x = sx;
        this.y = sy;
        this.sx = sx;
        this.sy = sy;
        this.tx = tx;
        this.ty = ty;
        this.distanceToTarget = distance(sx, sy, tx, ty);
        this.distanceTraveled = 0;
        this.coordinates = [];
        this.coordinateCount = 3;
        while(this.coordinateCount--) {
            this.coordinates.push([this.x, this.y]);
        }
        this.angle = Math.atan2(ty - sy, tx - sx);
        this.speed = 3 + Math.random() * 2;
        this.acceleration = 1.05;
        this.brightness = Math.random() * 50 + 50;
        this.targetRadius = 1;
    }
    update(index) {
        this.coordinates.pop();
        this.coordinates.unshift([this.x, this.y]);
        if(this.targetRadius < 8) {
            this.targetRadius += 0.3;
        } else {
            this.targetRadius = 1;
        }
        this.speed *= this.acceleration;
        let vx = Math.cos(this.angle) * this.speed;
        let vy = Math.sin(this.angle) * this.speed;
        this.distanceTraveled = distance(this.sx, this.sy, this.x + vx, this.y + vy);
        if(this.distanceTraveled >= this.distanceToTarget) {
            createParticles(this.tx, this.ty);
            fireworks.splice(index, 1);
        } else {
            this.x += vx;
            this.y += vy;
        }
    }
    draw() {
        ctx.beginPath();
        ctx.moveTo(this.coordinates[this.coordinates.length -1][0], this.coordinates[this.coordinates.length -1][1]);
        ctx.lineTo(this.x, this.y);
        ctx.strokeStyle = `hsl(${Math.random()*360}, 100%, ${this.brightness}%)`;
        ctx.stroke();

        ctx.beginPath();
        ctx.arc(this.tx, this.ty, this.targetRadius, 0, Math.PI*2);
        ctx.stroke();
    }
}

class Particle {
    constructor(x, y) {
        this.x = x;
        this.y = y;
        this.coordinates = [];
        this.coordinateCount = 5;
        while(this.coordinateCount--) {
            this.coordinates.push([this.x, this.y]);
        }
        this.angle = Math.random() * Math.PI * 2;
        this.speed = Math.random() * 6 + 2;
        this.friction = 0.95;
        this.gravity = 0.7;
        this.hue = Math.floor(Math.random() * 360);
        this.brightness = Math.random() * 50 + 50;
        this.alpha = 1;
        this.decay = Math.random() * 0.03 + 0.015;
    }
    update(index) {
        this.coordinates.pop();
        this.coordinates.unshift([this.x, this.y]);
        this.speed *= this.friction;
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed + this.gravity;
        this.alpha -= this.decay;

        if(this.alpha <= 0) {
            particles.splice(index, 1);
        }
    }
    draw() {
        ctx.beginPath();
        ctx.moveTo(this.coordinates[this.coordinates.length -1][0], this.coordinates[this.coordinates.length -1][1]);
        ctx.lineTo(this.x, this.y);
        ctx.strokeStyle = `hsla(${this.hue}, 100%, ${this.brightness}%, ${this.alpha})`;
        ctx.stroke();
    }
}

function distance(aX, aY, bX, bY) {
    const dx = bX - aX;
    const dy = bY - aY;
    return Math.sqrt(dx*dx + dy*dy);
}

function createParticles(x, y) {
    let particleCount = 30;
    while(particleCount--) {
        particles.push(new Particle(x, y));
    }
}

function launchFirework() {
    const startX = cw / 2;
    const startY = ch;
    const targetX = Math.random() * cw;
    const targetY = Math.random() * ch / 2;
    fireworks.push(new Firework(startX, startY, targetX, targetY));
}

function animate() {
    ctx.globalCompositeOperation = 'destination-out';
    ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
    ctx.fillRect(0, 0, cw, ch);
    ctx.globalCompositeOperation = 'lighter';

    for(let i = fireworks.length - 1; i >= 0; i--) {
        fireworks[i].draw();
        fireworks[i].update(i);
    }
    for(let i = particles.length - 1; i >= 0; i--) {
        particles[i].draw();
        particles[i].update(i);
    }
    animationFrameId = requestAnimationFrame(animate);
}

let fireworkInterval;

function startFireworks() {
    document.getElementById('fireworksCanvas').style.display = 'block';
    fireworkInterval = setInterval(launchFirework, 400);
    animate();
}

function stopFireworks() {
    clearInterval(fireworkInterval);
    cancelAnimationFrame(animationFrameId);
    ctx.clearRect(0, 0, cw, ch);
    document.getElementById('fireworksCanvas').style.display = 'none';
}

function showCongrats() {
    const congrats = document.getElementById('congrats');
    congrats.style.display = 'block';
}

// –ù–∞—á–∏–Ω–∞–µ–º –∏–≥—Ä—É
showQuestion();

</script>

</body>
</html>
